# 碎念小栈需求文档

## 1. 网站概述

### 1.1 网站名称
碎念小栈

### 1.2 网站描述
一个有趣轻松的互动网站，用户可以在卡片上记录今天的心情、想说的话或想吐槽的内容，系统调用阿里云百炼AI API生成四种不同风格的文本回应，包括黑暗激励、毒鸡汤、小故事和哲理名言，营造像素风格的互动体验。

## 2. 功能需求

### 2.1 核心功能
- 用户输入心情卡片：支持用户自由输入文字内容
- AI文本生成：调用阿里云百炼API生成四种类型文本
  - 黑暗激励：越丧越燃的鼓励话语
  - 毒鸡汤：一针见血的现实感悟
  - 小故事：30字微小说
  - 哲理名言：假装深刻的金句
- 卡片交互：像素风格卡片碎纸机效果，卡片被切成四张纸条
- 文本展示：四张纸条以扑克牌样式叠放，支持左右滑动和翻面操作
- 拖拽重置功能：支持拖动任意纸条进垃圾桶重新碎纸生成新卡片

### 2.2 交互流程
1. 用户打开网站，像素风垃圾桶自动抖动
2. 用户在卡片中输入文字内容（心情、吐槽等）
3. 点击「碎一下」按钮
4. 卡片被碎纸机切成四张纸条，分别显示四种文本
5. 四张纸条以散乱方式分布在屏幕上，支持滑动和翻面交互
6. 用户可拖拽任意纸条进垃圾桶，触发重新碎纸生成新卡片

### 2.3 特殊功能
- 背景像素猫动画：碎纸机运行时捂眼/偷笑/晕倒三帧动画
- 自动整理：当屏幕上卡片过多时，自动整理成整齐的散乱状态
- 午夜模式：午夜0点后自动切换霓虹黑配色，字体闪星星

## 3. 技术实现

### 3.1 前端技术
- 框架：Vue3 + Vite
- 像素风格：CSS image-rendering: pixelated
- 卡片绘制：Canvas 16×16颗粒感
- 拖拽功能：vue-draggable-next实现拖拽交互
- 3D效果：tilt.js轻微倾斜动画
- 音效：8-bit机箱键盘mp3

### 3.2 后端技术
- 平台：阿里云函数计算（FC）
- 环境：Node18单文件index.mjs
- API接口：
  - 接收POST {text}请求
  - 调用百炼API（qwen-turbo）
  - 返回JSON格式：{status:ok, bits:[...]}
- 系统prompt：
  \"你是碎纸机里的毒舌小精灵，请把用户输入当成燃料，严格按以下JSON格式返回，不要有多余解释：{darkCheer:string, toxicSoup:string, microStory:string, deepQuote:string}\"

### 3.3 部署方案
- 前端：OSS静态托管+CDN，域名sui-nian.fun
- 后端：Serverless Devs一键部署s deploy
- API密钥：存函数环境变量，按量付费

## 4. 设计风格

### 4.1 视觉风格
- 整体风格：像素游戏风，8-bit复古美学
- 布局方式：散乱分布式，卡片以自然掉落姿态分布在屏幕上
- 动画效果：碎纸机切割动画、卡片翻面、拖拽物理效果

### 4.2 配色方案
- 白天模式：米白色背景+深蓝色垃圾桶+橙红色碎纸机
- 午夜模式：深紫色背景+霓虹蓝绿渐变文字+星星闪烁特效

### 4.3 视觉细节
- 卡片采用粗线条边框和明显圆角
- 文字使用像素字体，清晰易读
- 所有元素具有明显的颗粒感
- 拖拽时添加轻微缩放和阴影效果增强物理感

## 5. API配置

### 5.1 百炼AI API
- API地址：https://dashscope.aliyuncs.com/compatible-mode/v1/
- API密钥：sk-7aa971b83d4141d784db303a0ff2269b
- 调用方式：通过后端函数计算代理调用
- 响应格式：JSON对象包含四个文本字段

## 6. 项目特色

### 6.1 核心卖点
- AI趣味互动：坏情绪输入，四倍快乐输出
- 像素美学：全流程像素风格设计
- 拖拽重置：支持拖拽卡片进垃圾桶重新生成
- 散乱布局：卡片以自然掉落姿态分布在屏幕上
- 视觉彩蛋：猫咪动画和午夜模式

### 6.2 用户价值
- 情绪宣泄口：提供安全的吐槽渠道
- 愉悦体验：AI的幽默回应带来欢乐
- 互动乐趣：拖拽重置功能增加玩法深度
- 视觉享受：像素艺术风格的独特体验